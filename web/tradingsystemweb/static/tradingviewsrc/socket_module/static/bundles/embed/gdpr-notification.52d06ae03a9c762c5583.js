(window.webpackJsonp=window.webpackJsonp||[]).push([["gdpr-notification"],{"kRh/":function(i,o,t){"use strict";t.r(o),t.d(o,"GdprNotification",(function(){return c}));t("bSeV");var e=t("wVAQ"),s=t("FBuY");class c{constructor(){this._dialog=null,this._promise=null,this._showDialog=i=>{this._dialog||(this._dialog=i,i.on("action:accept",this._onAccept),i.open())},this._closeDialog=()=>{this._dialog&&(this._dialog.close(),this._dialog=null)},this._onAccept=()=>{Object(e.fetch)("/accept_policy/",{credentials:"include",method:"POST"}).then(this._onSuccess,this._closeDialog)},this._onSuccess=()=>{this._closeDialog(),s.TVXWindowEvents.emit("acceptPolicy")},this._subscribe()}showIfNotAccepted(){const i=window.user,o=window.is_authenticated,t="/privacy-policy/"!==window.location.pathname,e=new Date(2018,4,17),s=(i.date_joined?new Date(i.date_joined):new Date)<e&&!i.is_policy_accepted;o&&t&&s&&this._loadDialog().then(this._showDialog)}_loadDialog(){return this._promise||(this._promise=Promise.all([t.e("vendors"),t.e(19),t.e(25),t.e("dialogs-core"),t.e(26),t.e(32),t.e(34),t.e("gdpr-notification-dialog")]).then(t.bind(null,"MuAU")).then(({createGdprNotificationDialog:i})=>i())),this._promise}_subscribe(){window.loginStateChange.subscribe(this,this.showIfNotAccepted),s.TVXWindowEvents.on("acceptPolicy",this._closeDialog)}}}}]);